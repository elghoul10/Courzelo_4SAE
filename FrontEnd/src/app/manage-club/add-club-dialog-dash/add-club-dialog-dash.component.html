<h1 mat-dialog-title style="margin-bottom: 1rem">Add Course</h1>
<div class="section__title-wrapper">
  <h2 mat-dialog-title class="section__title">
    Get in<span class="yellow-bg yellow-bg-big"
      >touch<img src="./assets/images/shape/yellow-bg.png" alt=""
    /></span>
  </h2>
</div>

<div mat-dialog-content>
  <div class="contact__form">
    <form #f="ngForm" (ngSubmit)="submitForm(f.value)">
      <div class="row">
        <div class="col-12 m-b-30">
          <div class="contact__form-input__image__container">
            <img
              class="contact__form-input__image"
              [src]="imageUrl"
              alt="Image Preview"
            />
          </div>

          <div class="contact__form-input contact__form-input__image__btns">
            <input
              type="file"
              accept="*/*"
              id="Image"
              name="imgUrl"
              ngModel
              #fileInput
              style="display: none"
              (change)="onFileSelected($event)"
            />

            <!-- Button to trigger file input click -->
            <button
              type="button"
              mat-flat-button
              class="Extended-Fab"
              (click)="triggerFileInputClick()"
            >
              <span class="Extended-Fab__container">
                <i-tabler
                  class="routeIcon Extended-Fab__icon"
                  name="cloud-upload"
                  matListItemIcon
                ></i-tabler>
                <span class="Extended-Fab__text">Select Video</span>
              </span>
            </button>

            <button
              type="button"
              mat-flat-button
              class="Extended-Fab Extended-Fab--2 m-l-16"
              (click)="resetAvatarImage()"
            >
              <span class="Extended-Fab__container">
                <i-tabler
                  class="routeIcon Extended-Fab__icon"
                  name="photo-cancel"
                  matListItemIcon
                ></i-tabler>
                <span class="Extended-Fab__text">Reset Image</span>
              </span>
            </button>
          </div>
        </div>
        <div class="col-12">
          <div class="contact__form-input">
            <label class="contact__form-input-label" for="nom">Name</label>
            <input
              #nomField="ngModel"
              type="text"
              placeholder="Course Title"
              id="nom"
              name="courseTitle"
              ngModel
              required
              minlength="3"
              pattern="[a-zA-Z]+[a-zA-Z ]*"
              [ngClass]="{ inputError: nomField.invalid && nomField.touched }"
            />
            <app-error-form-handler
              [fieldIn]="nomField"
              [isFormSubmitedIn]="isFormSubmited"
            >
            </app-error-form-handler>
          </div>
        </div>

        <div class="col-12">
          <div class="contact__form-input">
            <label class="contact__form-input-label" for="prix">Prix</label>
            <input
              #prixField="ngModel"
              type="number"
              placeholder="Prix"
              id="prix"
              name="prix"
              ngModel
              required
              [ngClass]="{ inputError: prixField.invalid && prixField.touched }"
            />
            <div
              *ngIf="prixField.invalid && prixField.touched"
              class="error-message"
            >
              Prix invalide
            </div>
          </div>
        </div>

        <div class="col-12" style="margin-bottom: 8px">
          <div
            class="contact__form-input"
            style="display: flex; flex-direction: column"
          >
            <label for="University" style="margin-bottom: 0.5rem"
              >University</label
            >

            <mat-form-field>
              <mat-select
                class="mat-select-trigger"
                id="university"
                name="university"
                ngModel
                placeholder="Select University"
                #uniField="ngModel"
                required
              >
                <mat-option
                  *ngFor="let universite of universites"
                  [value]="universite.nomUniversite"
                  >{{
                    universite.nomUniversite.charAt(0).toUpperCase() +
                      universite.nomUniversite.slice(1).toLowerCase()
                  }}</mat-option
                >
              </mat-select>
              <mat-error
                *ngIf="uniField.invalid && (uniField.dirty || uniField.touched)"
              >
                <span *ngIf="uniField.errors?.['required']"
                  >University is required.</span
                >
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="col-12">
          <div class="contact__form-input">
            <label for="Description">Description</label>
            <textarea
              #descField="ngModel"
              placeholder="Enter Your Description"
              id="Description"
              name="courseDescription"
              ngModel
              required
              minlength="3"
              pattern="[a-zA-Z]+[a-zA-Z ]*"
              [ngClass]="{ inputError: descField.invalid && descField.touched }"
            ></textarea>
            <app-error-form-handler
              [fieldIn]="descField"
              [isFormSubmitedIn]="isFormSubmited"
            >
            </app-error-form-handler>
          </div>
        </div>
        <div class="col-12" style="margin-top: 1rem">
          <button type="submit" mat-flat-button color="primary">Add</button>
        </div>
      </div>
    </form>
  </div>
</div>
